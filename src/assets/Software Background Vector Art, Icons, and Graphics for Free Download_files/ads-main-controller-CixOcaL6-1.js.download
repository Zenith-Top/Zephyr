import{a as r}from"./stimulus-helpers-Bg5ApOVk-1.js";import{f as i}from"./helpers-SiW2vY12-1.js";import o from"./ez-base-controller-DuL8VR07-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-BlDnuGFC-1.js";class n extends o{constructor(){super(...arguments),this.initAds=()=>{this.initImageAds(),window.freestar.queue.push(()=>{window.freestar.trackPageview()})},this.initImageAds=()=>{const s=[...document.getElementsByClassName("freestar-ad-zone")],e=[];s.forEach(t=>{e.push({placementName:t.getAttribute("id")||"",slotId:t.getAttribute("id")||""})}),window.freestar.queue.push(()=>{i("ads_defer")?setTimeout(()=>{requestAnimationFrame(()=>{window.freestar.newAdSlots(e)})},1e3):window.freestar.newAdSlots(e)})},this.resetAds=()=>{window.freestar.queue.push(()=>{window.freestar.deleteAdSlots()}),this.disconnect(),this.connect()}}connect(){window.addEventListener("turbo:load",this.initAds),window.addEventListener("turbo:before-visit",this.resetAds)}disconnect(){window.removeEventListener("turbo:load",this.initAds),window.removeEventListener("turbo:before-visit",this.resetAds)}}r({name:"ads-main",import:n});export{n as default};
