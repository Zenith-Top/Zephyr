import{a}from"./stimulus-helpers-Bg5ApOVk-1.js";import o from"./ez-base-controller-DuL8VR07-1.js";import{S as s}from"./helpers-SiW2vY12-1.js";import{M as u}from"./media-matcher-vK8K0PVe-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-BlDnuGFC-1.js";const i=new u,n=class n extends o{constructor(){super(...arguments),this.timer=null,this.updateTimer=()=>{const t=Date.now(),e=this.countdownDate-t;this.days=this.calculateTimerValue({part:"days",distance:e}),this.hours=this.calculateTimerValue({part:"hours",distance:e}),this.minutes=this.calculateTimerValue({part:"minutes",distance:e}),this.seconds=this.calculateTimerValue({part:"seconds",distance:e}),this.inlineValue?this.renderInlineOutput():this.renderBlockOutput(),this.flagLoaded(),e<0&&clearInterval(this.timer)}}connect(){const t=parseInt(this.countdownEndValue,10);this.countdownDate=new Date(t).getTime(),this.hasMobileDisableWidthValue?(i.addMediaQuery(`(min-width: ${this.mobileDisableWidthValue}px)`,()=>{this.startTimer()},()=>{this.timer&&clearInterval(this.timer)}),i.evaluateAll(),i.addListeners()):this.startTimer()}disconnect(){this.timer&&clearInterval(this.timer),this.hasMobileDisableWidthValue&&(i.removeListeners(),i.clearQueries())}startTimer(){this.timer=setInterval(this.updateTimer,1e3)}calculateTimerValue({part:t,distance:e}){switch(t){case"days":return Math.floor(e/(1e3*60*60*24));case"hours":return Math.floor(e%(1e3*60*60*24)/(1e3*60*60));case"minutes":return Math.floor(e%(1e3*60*60)/(1e3*60));case"seconds":default:return Math.floor(e%(1e3*60)/1e3)}}renderInlineOutput(){const t=[s(this.minutes),s(this.seconds)];this.days?(t.unshift(s(this.hours)),t.unshift(`${this.days}`)):t.unshift(`${this.hours}`),this.element.innerHTML=t.join(":")}renderBlockOutput(){const t=[this.renderTimerBlock("hours"),this.renderTimerBlock("minutes"),this.renderTimerBlock("seconds")];this.days&&t.unshift(this.renderTimerBlock("days")),this.element.innerHTML=t.join("")}renderTimerBlock(t){return`<span class="countdown-timer__unit-block">
              <span class="countdown-timer__unit-block__unit-value">${this[t]}</span>
              <span class="countdown-timer__unit-block__unit-text">${this[`${t}TextValue`]}</span>
            </span>`}};n.values={mobileDisableWidth:Number,countdownEnd:String,daysText:String,hoursText:String,minutesText:String,secondsText:String,inline:Boolean};let r=n;a({name:"countdown-timer",import:r});export{r as default};
