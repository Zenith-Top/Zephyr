import{a as n}from"./stimulus-helpers-Bg5ApOVk-1.js";import l from"./ez-base-controller-DuL8VR07-1.js";import{sendTrackingEvent as t,findCategoryByElement as c,trackCompleteEvent as h}from"./tracking-wc8XaWQf-1.js";import{ap as d,a9 as u,aq as m,ar as g,as as C,y as p,z as L}from"./actions-DEzMaOTc-1.js";import{M as f}from"./media-matcher-vK8K0PVe-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./helpers-SiW2vY12-1.js";import"./init-user-BlDnuGFC-1.js";const a=new f,r=class r extends l{constructor(){super(...arguments),this.isVisible=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),this.trackExploreClick=e=>{t({element:e.target,data:{action:d,label:`Link-${e.target.dataset.englishLabel}`,content_type:`Content-${e.target.dataset.contentType}`}})}}connect(){this.hasMobileMenuTarget&&(this.setupSearchCloseQueries(),a.evaluateAll(),a.addListeners())}disconnect(){a.removeListeners(),a.clearQueries()}clearSearchInput(){requestAnimationFrame(()=>{this.searchField.value="",this.searchField.focus()})}hideOnClickOutside(){const e=o=>{!this.element.contains(o.target)&&this.isVisible(this.element)&&(requestAnimationFrame(()=>{document.body.classList.toggle("is-mobile-search")}),i())},i=()=>{document.removeEventListener("click",e)};setTimeout(()=>{document.addEventListener("click",e)},50)}toggleMobileSearch(){const e=document.body;requestAnimationFrame(()=>{e.classList.toggle("is-mobile-search"),e.classList.contains("is-mobile-search")?(this.hideOnClickOutside(),requestAnimationFrame(()=>{this.savedVal=this.searchField.value,this.searchField.focus(),this.searchField.value="",this.searchField.value=this.savedVal})):requestAnimationFrame(()=>{this.searchField.value="",this.searchField.value=this.savedVal})})}setupSearchCloseQueries(){a.addMediaQuery("(max-width: 635px)",null,()=>{document.querySelector(".ez-dark-overlay.mobile-search-overlay")&&this.toggleMobileSearch()})}rebuyCredits(e){t({element:e.currentTarget,data:{action:u}})}headerLogin(){t({element:this.loginButtonTarget,data:{action:m}})}headerSignUp(){t({element:this.signupButtonTarget,data:{action:g}})}trackLogoutClick(e){t({element:e.target,data:{action:C}})}sendHeaderJoinProEvent(e){const i=c(e.target);t({element:e.target,data:{action:p,category:i}}),h({action:L,category:i})}get searchField(){return this.element.querySelector(".ez-search-form__input")}};r.targets=["mobileMenu","loginButton","signupButton"];let s=r;n({name:"site-header",import:s});export{s as default};
