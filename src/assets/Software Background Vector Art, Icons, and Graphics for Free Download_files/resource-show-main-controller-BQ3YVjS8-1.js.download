import{a}from"./stimulus-helpers-Bg5ApOVk-1.js";import m from"./ez-base-controller-DuL8VR07-1.js";import{n as c,t as l}from"./helpers-SiW2vY12-1.js";import{sendTrackingEvent as t}from"./tracking-wc8XaWQf-1.js";import{aB as d,aC as u}from"./actions-DEzMaOTc-1.js";import{a as p,s as C}from"./sessions-manager-DfRApYrt-1.js";import{i as f}from"./tooltips-f4Rf20ab-1.js";import{g as _}from"./resource-show-helpers-DXDjpo0n-1.js";import{i as w}from"./ajax-helpers-vhfuGJDo-1.js";import{e as g}from"./events-BkNvg-Hc-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-BlDnuGFC-1.js";import"./preload-helper-cYIQMxwj-1.js";import"./index-C4xxlH8f-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";import"./modal_helpers-CVMysF8B-1.js";class b extends m{constructor(){super(...arguments),this.contributorClick=e=>{this.trackContributorClick(e)}}connect(){p(this.element.dataset.resourceId),C("most_recent_resource_id",this.element.dataset.resourceId),document.querySelector('[data-ez-tooltip="true"]')&&f()}trackContributorClick(e){t({element:e.target,data:{action:d}})}trackLicenseClick(e){t({element:e.target,data:{action:u,category:"Show",label:_(),content_type:`Content-${c()}`}})}showFreeAttributionSlidedown({detail:{licenseType:e,resourceId:o}}){if(e==="free"){const r=document.querySelector('[data-controller="free-attribution-slidedown"]'),i=document.querySelector(".ez-session-modal__download-limit");if(r||i)return;const n=document.querySelector(".ez-page-wrapper__content");w({url:`/resources/${o}/show_free_attr_slidedown`,destElem:n,destPos:"afterbegin",successCb:()=>{setTimeout(()=>{l(g.show_page.reveal_free_attribution_slidedown)},100)},errorCb:s=>{console.error(s)}})}}}a({name:"resource-show-main",import:b});export{b as default};
